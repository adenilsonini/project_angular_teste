<form [formGroup]="Uploadform">

  <div class="form-group">
    <label for="name">Título das Imagens</label>
    <input type="text" formControlName="name" required name="name" minlength="5"
      [ngClass]="{'is-invalid': myForm.name.errors}" class="form-control" placeholder="Informe o Título das Imagens">

    <div class="invalid-feedback">
      <span *ngIf="myForm.name.errors?.required">* Informe o Título da Imagens (Obrigatorio)</span>
      <span *ngIf="myForm.name.errors?.minlength">* Mínimo 5 caracteres</span>
    </div>

  </div>

  <div class="row" style="margin-top: 10px;">
    <div *ngFor='let url of images' class="imgUpload col-md-3">
      <img [src]="url">
      <button type="button" class="btn btn-outline-danger btn-sm" (click)="excluir_img(url)">Excluir</button>
    </div>
  </div>

  <div class="form-group" *ngIf="this.salvar === false">
    <input type="file" multiple (change)="selectFiles($event)" />
  </div>

  <div *ngIf="this.salvar === false" class="form-group">
    <button class="btn btn-success btn-sm" (click)="uploadFiles()" [disabled]="!Uploadform.valid">
      Enviar imagens
    </button>
  </div>

  <div *ngIf="this.salvar === true" class="form-group">
    <button class="btn btn-primary btn-sm" (click)="novo()">
      Novo Envio
    </button>
  </div>

</form>




<div *ngFor="let progressInfo of progressInfos" class="mb-2">
  <span>Imagem: {{ progressInfo.fileName }}</span>
  <div class="progress">
    <div
      class="progress-bar progress-bar-striped bg-success"
      role="progressbar"
      attr.aria-valuenow="{{ progressInfo.value }}"
      aria-valuemin="0"
      aria-valuemax="100"
      [ngStyle]="{ width: progressInfo.value + '%' }"
    >
      {{ progressInfo.value }}%
    </div>
  </div>
</div>

<div *ngIf="message.length" class="alert alert-secondary my-3" role="alert">
  <ul *ngFor="let msg of message; let i = index">
    <li>{{ msg }}</li>
  </ul>
</div>

